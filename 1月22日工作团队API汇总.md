# 1月22日工作团队API汇总

## 概述

本文档描述了工作团队管理相关的所有RESTful API接口，包括团队、成员和权限的完整CRUD操作，供前端开发人员使用。

## 数据库表关系

- **tb_work_team**（工作团队表）：存储团队基本信息
- **tb_work_team_member**（工作团队成员表）：存储团队成员信息，与团队表为一对多关系
- **tb_work_team_permission**（工作团队权限表）：存储团队成员权限，与成员表为一对多关系

## 基础URL

```
http://192.168.0.120:8080/work-team
```

## 通用响应格式

所有接口返回统一的响应格式：

### 成功响应
```json
{
  "code": 200,
  "message": "操作成功",
  "data": {}
}
```

### 错误响应
```json
{
  "code": 400,
  "message": "错误描述",
  "data": null
}
```

---

## API接口列表

### 1. 创建工作团队

**功能描述**：创建一个新的工作团队

**请求URL**：`POST /work-team`

**请求方法**：POST

**请求参数**：

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| teamName | String | 是 | 团队名称 |
| teamLeaderId | Long | 是 | 团队负责人ID |
| caseId | Long | 是 | 案件ID |
| teamDescription | String | 否 | 团队描述 |

**请求示例**：
```json
{
  "teamName": "破产案件处理团队",
  "teamLeaderId": 1,
  "caseId": 100,
  "teamDescription": "负责破产案件的处理工作"
}
```

**响应示例**：
```json
{
  "code": 200,
  "message": "操作成功",
  "data": {
    "teamId": 1
  }
}
```

---

### 2. 工作团队列表（分页）

**功能描述**：获取工作团队列表，支持分页和条件查询

**请求URL**：`GET /work-team/list`

**请求方法**：GET

**请求参数**：

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| pageNum | Integer | 否 | 页码，默认1 |
| pageSize | Integer | 否 | 每页大小，默认10 |
| caseId | Long | 否 | 案件ID |
| status | String | 否 | 状态（ACTIVE/INACTIVE/DELETED） |
| teamName | String | 否 | 团队名称（模糊查询） |
| teamLeaderId | Long | 否 | 团队负责人ID |

**请求示例**：
```
GET /work-team/list?pageNum=1&pageSize=10&status=ACTIVE
```

**响应示例**：
```json
{
  "code": 200,
  "message": "操作成功",
  "data": {
    "total": 100,
    "list": [
      {
        "id": 1,
        "teamName": "破产案件处理团队",
        "teamLeaderId": 1,
        "caseId": 100,
        "teamDescription": "负责破产案件的处理工作",
        "status": "ACTIVE",
        "isDeleted": 0,
        "createTime": "2026-01-22T10:00:00",
        "updateTime": "2026-01-22T10:00:00",
        "createUserId": 1,
        "updateUserId": 1
      }
    ]
  }
}
```

---

### 3. 工作团队列表详情（含成员信息）

**功能描述**：获取工作团队列表，包含团队成员信息

**请求URL**：`GET /work-team/list/details`

**请求方法**：GET

**请求参数**：

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| pageNum | Integer | 否 | 页码，默认1 |
| pageSize | Integer | 否 | 每页大小，默认10 |
| caseId | Long | 否 | 案件ID |
| status | String | 否 | 状态（ACTIVE/INACTIVE/DELETED） |
| teamName | String | 否 | 团队名称（模糊查询） |
| teamLeaderId | Long | 否 | 团队负责人ID |

**请求示例**：
```
GET /work-team/list/details?pageNum=1&pageSize=10&caseId=100
```

**响应示例**：
```json
{
  "code": 200,
  "message": "操作成功",
  "data": {
    "total": 10,
    "list": [
      {
        "id": 1,
        "teamName": "破产案件处理团队",
        "teamLeaderId": 1,
        "teamLeaderName": "张三",
        "caseId": 100,
        "caseName": "某公司破产案",
        "teamDescription": "负责破产案件的处理工作",
        "status": "ACTIVE",
        "createTime": "2026-01-22T10:00:00",
        "updateTime": "2026-01-22T10:00:00",
        "createUserId": 1,
        "updateUserId": 1,
        "members": [
          {
            "id": 1,
            "teamId": 1,
            "teamName": "破产案件处理团队",
            "caseId": 100,
            "caseName": "某公司破产案",
            "userId": 2,
            "userName": "lisi",
            "userRealName": "李四",
            "teamRole": "律师",
            "permissionLevel": "EDIT",
            "isActive": 1,
            "status": "ACTIVE",
            "createTime": "2026-01-22T10:00:00",
            "updateTime": "2026-01-22T10:00:00",
            "createUserId": 1,
            "updateUserId": 1
          }
        ]
      }
    ]
  }
}
```

---

### 4. 获取工作团队详情

**功能描述**：根据团队ID获取工作团队基本信息

**请求URL**：`GET /work-team/{teamId}`

**请求方法**：GET

**请求参数**：

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| teamId | Long | 是 | 团队ID（路径参数） |

**请求示例**：
```
GET /work-team/1
```

**响应示例**：
```json
{
  "code": 200,
  "message": "操作成功",
  "data": {
    "id": 1,
    "teamName": "破产案件处理团队",
    "teamLeaderId": 1,
    "caseId": 100,
    "teamDescription": "负责破产案件的处理工作",
    "status": "ACTIVE",
    "isDeleted": 0,
    "createTime": "2026-01-22T10:00:00",
    "updateTime": "2026-01-22T10:00:00",
    "createUserId": 1,
    "updateUserId": 1
  }
}
```

---

### 5. 获取工作团队详情（含成员信息）

**功能描述**：获取工作团队详细信息，包括团队成员信息

**请求URL**：`GET /work-team/{teamId}/detail`

**请求方法**：GET

**请求参数**：

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| teamId | Long | 是 | 团队ID（路径参数） |

**请求示例**：
```
GET /work-team/1/detail
```

**响应示例**：
```json
{
  "code": 200,
  "message": "操作成功",
  "data": {
    "id": 1,
    "teamName": "破产案件处理团队",
    "teamLeaderId": 1,
    "teamLeaderName": "张三",
    "caseId": 100,
    "caseName": "某公司破产案",
    "teamDescription": "负责破产案件的处理工作",
    "status": "ACTIVE",
    "createTime": "2026-01-22T10:00:00",
    "updateTime": "2026-01-22T10:00:00",
    "createUserId": 1,
    "updateUserId": 1,
    "members": [
      {
        "id": 1,
        "teamId": 1,
        "teamName": "破产案件处理团队",
        "caseId": 100,
        "caseName": "某公司破产案",
        "userId": 2,
        "userName": "lisi",
        "userRealName": "李四",
        "teamRole": "律师",
        "permissionLevel": "EDIT",
        "isActive": 1,
        "status": "ACTIVE",
        "createTime": "2026-01-22T10:00:00",
        "updateTime": "2026-01-22T10:00:00",
        "createUserId": 1,
        "updateUserId": 1
      }
    ]
  }
}
```

---

### 6. 更新工作团队信息

**功能描述**：更新工作团队的基本信息

**请求URL**：`PUT /work-team/{teamId}`

**请求方法**：PUT

**请求参数**：

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| teamId | Long | 是 | 团队ID（路径参数） |
| teamName | String | 否 | 团队名称 |
| teamDescription | String | 否 | 团队描述 |
| status | String | 否 | 状态（ACTIVE/INACTIVE/DELETED） |

**请求示例**：
```json
{
  "teamName": "破产案件处理团队（更新）",
  "teamDescription": "负责破产案件的处理工作（更新）",
  "status": "ACTIVE"
}
```

**响应示例**：
```json
{
  "code": 200,
  "message": "操作成功",
  "data": null
}
```

---

### 7. 删除工作团队

**功能描述**：删除指定的工作团队

**请求URL**：`DELETE /work-team/{teamId}`

**请求方法**：DELETE

**请求参数**：

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| teamId | Long | 是 | 团队ID（路径参数） |

**请求示例**：
```
DELETE /work-team/1
```

**响应示例**：
```json
{
  "code": 200,
  "message": "操作成功",
  "data": null
}
```

---

### 8. 添加团队成员

**功能描述**：向指定团队添加成员

**请求URL**：`POST /work-team/{teamId}/member`

**请求方法**：POST

**请求参数**：

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| teamId | Long | 是 | 团队ID（路径参数） |
| caseId | Long | 是 | 案件ID |
| userId | Long | 是 | 用户ID |
| teamRole | String | 是 | 团队角色 |
| permissionLevel | String | 否 | 权限级别（VIEW/EDIT/ADMIN） |

**请求示例**：
```json
{
  "caseId": 100,
  "userId": 2,
  "teamRole": "律师",
  "permissionLevel": "EDIT"
}
```

**响应示例**：
```json
{
  "code": 200,
  "message": "操作成功",
  "data": {
    "memberId": 1
  }
}
```

---

### 9. 团队成员列表

**功能描述**：获取指定团队的所有成员信息

**请求URL**：`GET /work-team/{teamId}/members`

**请求方法**：GET

**请求参数**：

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| teamId | Long | 是 | 团队ID（路径参数） |

**请求示例**：
```
GET /work-team/1/members
```

**响应示例**：
```json
{
  "code": 200,
  "message": "操作成功",
  "data": [
    {
      "id": 1,
      "teamId": 1,
      "teamName": "破产案件处理团队",
      "caseId": 100,
      "caseName": "某公司破产案",
      "userId": 2,
      "userName": "lisi",
      "userRealName": "李四",
      "teamRole": "律师",
      "permissionLevel": "EDIT",
      "isActive": 1,
      "status": "ACTIVE",
      "createTime": "2026-01-22T10:00:00",
      "updateTime": "2026-01-22T10:00:00",
      "createUserId": 1,
      "updateUserId": 1
    }
  ]
}
```

---

### 10. 获取团队成员详情

**功能描述**：获取团队成员的详细信息，包括权限信息

**请求URL**：`GET /work-team/member/{memberId}`

**请求方法**：GET

**请求参数**：

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| memberId | Long | 是 | 成员ID（路径参数） |

**请求示例**：
```
GET /work-team/member/1
```

**响应示例**：
```json
{
  "code": 200,
  "message": "操作成功",
  "data": {
    "id": 1,
    "teamId": 1,
    "teamName": "破产案件处理团队",
    "caseId": 100,
    "caseName": "某公司破产案",
    "userId": 2,
    "userName": "lisi",
    "userRealName": "李四",
    "teamRole": "律师",
    "permissionLevel": "EDIT",
    "isActive": 1,
    "status": "ACTIVE",
    "createTime": "2026-01-22T10:00:00",
    "updateTime": "2026-01-22T10:00:00",
    "createUserId": 1,
    "updateUserId": 1,
    "permissions": [
      {
        "id": 1,
        "teamMemberId": 1,
        "moduleType": "CASE_INFO",
        "permissionType": "VIEW",
        "isAllowed": 1,
        "status": "ACTIVE",
        "isDeleted": 0,
        "createTime": "2026-01-22T10:00:00",
        "updateTime": "2026-01-22T10:00:00",
        "createUserId": 1,
        "updateUserId": 1
      }
    ]
  }
}
```

---

### 11. 获取团队成员详情（兼容前端路径）

**功能描述**：获取团队成员的详细信息，包括权限信息（兼容旧版前端路径）

**请求URL**：`GET /work-team/work-team-member/{memberId}`

**请求方法**：GET

**请求参数**：

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| memberId | Long | 是 | 成员ID（路径参数） |

**请求示例**：
```
GET /work-team/work-team-member/1
```

**响应示例**：
```json
{
  "code": 200,
  "message": "操作成功",
  "data": {
    "id": 1,
    "teamId": 1,
    "teamName": "破产案件处理团队",
    "caseId": 100,
    "caseName": "某公司破产案",
    "userId": 2,
    "userName": "lisi",
    "userRealName": "李四",
    "teamRole": "律师",
    "permissionLevel": "EDIT",
    "isActive": 1,
    "status": "ACTIVE",
    "createTime": "2026-01-22T10:00:00",
    "updateTime": "2026-01-22T10:00:00",
    "createUserId": 1,
    "updateUserId": 1,
    "permissions": [
      {
        "id": 1,
        "teamMemberId": 1,
        "moduleType": "CASE_INFO",
        "permissionType": "VIEW",
        "isAllowed": 1,
        "status": "ACTIVE",
        "isDeleted": 0,
        "createTime": "2026-01-22T10:00:00",
        "updateTime": "2026-01-22T10:00:00",
        "createUserId": 1,
        "updateUserId": 1
      }
    ]
  }
}
```

---

### 12. 更新团队成员信息

**功能描述**：更新团队成员的基本信息

**请求URL**：`PUT /work-team/member/{memberId}`

**请求方法**：PUT

**请求参数**：

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| memberId | Long | 是 | 成员ID（路径参数） |
| teamRole | String | 否 | 团队角色 |
| permissionLevel | String | 否 | 权限级别（VIEW/EDIT/ADMIN） |
| status | String | 否 | 状态（ACTIVE/INACTIVE） |

**请求示例**：
```json
{
  "teamRole": "高级律师",
  "permissionLevel": "ADMIN",
  "status": "ACTIVE"
}
```

**响应示例**：
```json
{
  "code": 200,
  "message": "操作成功",
  "data": null
}
```

---

### 13. 删除团队成员

**功能描述**：删除指定的团队成员

**请求URL**：`DELETE /work-team/member/{memberId}`

**请求方法**：DELETE

**请求参数**：

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| memberId | Long | 是 | 成员ID（路径参数） |

**请求示例**：
```
DELETE /work-team/member/1
```

**响应示例**：
```json
{
  "code": 200,
  "message": "操作成功",
  "data": null
}
```

---

### 14. 删除团队成员（兼容前端路径）

**功能描述**：删除指定的团队成员（兼容旧版前端路径）

**请求URL**：`DELETE /work-team/work-team-member/{memberId}`

**请求方法**：DELETE

**请求参数**：

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| memberId | Long | 是 | 成员ID（路径参数） |

**请求示例**：
```
DELETE /work-team/work-team-member/1
```

**响应示例**：
```json
{
  "code": 200,
  "message": "操作成功",
  "data": null
}
```

---

### 15. 删除团队成员（按团队和成员ID）

**功能描述**：根据团队ID和成员ID删除团队成员

**请求URL**：`DELETE /work-team/{teamId}/member/{memberId}`

**请求方法**：DELETE

**请求参数**：

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| teamId | Long | 是 | 团队ID（路径参数） |
| memberId | Long | 是 | 成员ID（路径参数） |

**请求示例**：
```
DELETE /work-team/1/member/1
```

**响应示例**：
```json
{
  "code": 200,
  "message": "操作成功",
  "data": null
}
```

---

### 16. 获取团队成员权限

**功能描述**：获取指定成员的所有权限信息

**请求URL**：`GET /work-team/member/{memberId}/permissions`

**请求方法**：GET

**请求参数**：

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| memberId | Long | 是 | 成员ID（路径参数） |

**请求示例**：
```
GET /work-team/member/1/permissions
```

**响应示例**：
```json
{
  "code": 200,
  "message": "操作成功",
  "data": [
    {
      "id": 1,
      "teamMemberId": 1,
      "moduleType": "CASE_INFO",
      "permissionType": "VIEW",
      "isAllowed": 1,
      "status": "ACTIVE",
      "isDeleted": 0,
      "createTime": "2026-01-22T10:00:00",
      "updateTime": "2026-01-22T10:00:00",
      "createUserId": 1,
      "updateUserId": 1
    }
  ]
}
```

---

### 17. 获取团队成员权限（兼容前端路径）

**功能描述**：获取指定成员的所有权限信息（兼容旧版前端路径）

**请求URL**：`GET /work-team/work-team-member/{memberId}/permissions`

**请求方法**：GET

**请求参数**：

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| memberId | Long | 是 | 成员ID（路径参数） |

**请求示例**：
```
GET /work-team/work-team-member/1/permissions
```

**响应示例**：
```json
{
  "code": 200,
  "message": "操作成功",
  "data": [
    {
      "id": 1,
      "teamMemberId": 1,
      "moduleType": "CASE_INFO",
      "permissionType": "VIEW",
      "isAllowed": 1,
      "status": "ACTIVE",
      "isDeleted": 0,
      "createTime": "2026-01-22T10:00:00",
      "updateTime": "2026-01-22T10:00:00",
      "createUserId": 1,
      "updateUserId": 1
    }
  ]
}
```

---

### 18. 更新团队成员权限

**功能描述**：更新团队成员的权限级别

**请求URL**：`PUT /work-team/member/{memberId}/permission`

**请求方法**：PUT

**请求参数**：

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| memberId | Long | 是 | 成员ID（路径参数） |
| permissionLevel | String | 是 | 权限级别（VIEW/EDIT/ADMIN） |
| permissionType | String | 是 | 权限类型 |

**请求示例**：
```json
{
  "permissionLevel": "ADMIN",
  "permissionType": "VIEW"
}
```

**响应示例**：
```json
{
  "code": 200,
  "message": "操作成功",
  "data": null
}
```

---

### 19. 更新团队成员权限（兼容前端路径）

**功能描述**：更新团队成员的权限级别（兼容旧版前端路径）

**请求URL**：`PUT /work-team/work-team-member/{memberId}/permission`

**请求方法**：PUT

**请求参数**：

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| memberId | Long | 是 | 成员ID（路径参数） |
| permissionLevel | String | 是 | 权限级别（VIEW/EDIT/ADMIN） |
| permissionType | String | 是 | 权限类型 |

**请求示例**：
```json
{
  "permissionLevel": "ADMIN",
  "permissionType": "VIEW"
}
```

**响应示例**：
```json
{
  "code": 200,
  "message": "操作成功",
  "data": null
}
```

---

### 20. 分配团队成员权限

**功能描述**：为团队成员分配多个权限

**请求URL**：`POST /work-team/member/{memberId}/permissions`

**请求方法**：POST

**请求参数**：

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| memberId | Long | 是 | 成员ID（路径参数） |
| permissions | Array | 是 | 权限列表 |
| permissions[].moduleType | String | 是 | 模块类型 |
| permissions[].permissionType | String | 是 | 权限类型 |
| permissions[].isAllowed | Integer | 是 | 是否允许（0-否，1-是） |

**请求示例**：
```json
{
  "permissions": [
    {
      "moduleType": "CASE_INFO",
      "permissionType": "VIEW",
      "isAllowed": 1
    },
    {
      "moduleType": "CASE_INFO",
      "permissionType": "EDIT",
      "isAllowed": 1
    },
    {
      "moduleType": "FUND_MANAGEMENT",
      "permissionType": "VIEW",
      "isAllowed": 0
    }
  ]
}
```

**响应示例**：
```json
{
  "code": 200,
  "message": "操作成功",
  "data": null
}
```

---

### 21. 分配团队成员权限（兼容前端路径）

**功能描述**：为团队成员分配多个权限（兼容旧版前端路径）

**请求URL**：`POST /work-team/work-team-member/{memberId}/permissions`

**请求方法**：POST

**请求参数**：

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| memberId | Long | 是 | 成员ID（路径参数） |
| permissions | Array | 是 | 权限列表 |
| permissions[].moduleType | String | 是 | 模块类型 |
| permissions[].permissionType | String | 是 | 权限类型 |
| permissions[].isAllowed | Integer | 是 | 是否允许（0-否，1-是） |

**请求示例**：
```json
{
  "permissions": [
    {
      "moduleType": "CASE_INFO",
      "permissionType": "VIEW",
      "isAllowed": 1
    },
    {
      "moduleType": "CASE_INFO",
      "permissionType": "EDIT",
      "isAllowed": 1
    },
    {
      "moduleType": "FUND_MANAGEMENT",
      "permissionType": "VIEW",
      "isAllowed": 0
    }
  ]
}
```

**响应示例**：
```json
{
  "code": 200,
  "message": "操作成功",
  "data": null
}
```

---

### 22. 删除团队成员权限

**功能描述**：删除指定成员的某个权限

**请求URL**：`DELETE /work-team/permission/{permissionId}`

**请求方法**：DELETE

**请求参数**：

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| permissionId | Long | 是 | 权限ID（路径参数） |

**请求示例**：
```
DELETE /work-team/permission/1
```

**响应示例**：
```json
{
  "code": 200,
  "message": "操作成功",
  "data": null
}
```

---

## 错误码说明

| 错误码 | 说明 |
|--------|------|
| 200 | 操作成功 |
| 400 | 参数错误 |
| 401 | 未授权 |
| 403 | 权限不足 |
| 404 | 资源不存在 |
| 500 | 服务器内部错误 |

## 使用注意事项

1. **请求参数**：
   - 所有必填参数必须提供，否则返回400错误
   - 字符串参数长度限制：teamName（最多50字符），teamDescription（最多200字符）
   - 状态值必须为：ACTIVE/INACTIVE/DELETED
   - 权限级别必须为：VIEW/EDIT/ADMIN

2. **权限控制**：
   - 只有团队负责人或系统管理员可以修改团队信息
   - 只有团队负责人或系统管理员可以添加、删除或修改团队成员
   - 只有团队负责人或系统管理员可以分配或修改成员权限

3. **分页查询**：
   - 建议前端使用分页查询获取团队列表，避免数据量过大
   - 分页参数pageNum默认1，pageSize默认10

4. **关联查询**：
   - 获取团队详情时，如需成员信息请使用`/work-team/{teamId}/detail`接口
   - 获取成员详情时，如需权限信息请使用`/work-team/member/{memberId}`接口

5. **删除操作**：
   - 删除团队会级联删除团队成员和权限
   - 删除成员会级联删除成员权限
   - 建议在删除前进行确认

6. **兼容路径**：
   - 文档中提供了兼容旧版前端的接口路径，带有"（兼容前端路径）"标识
   - 新开发的前端功能建议使用标准路径

7. **权限管理**：
   - 系统权限优先于团队权限
   - 用户系统角色为LAWYER时，被分配到团队后可访问该案件
   - 权限级别ADMIN拥有最高权限

---

## 版本历史

| 版本 | 日期 | 说明 |
|------|------|------|
| 1.0.0 | 2026-01-09 | 初始版本，实现工作团队、成员和权限的完整CRUD功能 |
| 1.1.0 | 2026-01-22 | 新增团队列表详情接口，优化权限管理，增加兼容前端路径 |

---

## 联系方式

如有API使用问题，请联系后端开发团队。
