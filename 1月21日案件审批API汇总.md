# 1月21日案件审批API汇总

## 一、接口说明

### 基础URL
```
8080/approval
```

### 状态码说明
| 状态码 | 描述 |
|--------|------|
| 200    | 请求成功 |
| 400    | 请求参数错误 |
| 401    | 未授权 |
| 403    | 权限不足 |
| 404    | 资源不存在 |
| 500    | 服务器内部错误 |

### 响应格式
```json
{
  "code": 200,
  "message": "操作成功",
  "data": {}
}
```

## 二、API列表

<!-- ### 1. 创建审批

**接口路径**：`/approval`

**请求方法**：`POST`

**功能描述**：创建新的案件审批申请

**请求参数**：
```json
{
  "caseId": 123,                    // 案件ID（必填）
  "lawyerId": 456,                  // 律师ID（必填）
  "approvalType": "CASE_SUBMIT",   // 审核类型（必填）：CASE_SUBMIT-案件提交, CASE_CLOSE-案件结案, FEE_APPLY-费用申请, EVIDENCE_UPLOAD-证据上传
  "approvalContent": "案件提交审批",  // 审核内容
  "remark": "请尽快审核"
}
```

**响应数据**：
```json
{
  "code": 200,
  "message": "操作成功",
  "data": {
    "approvalId": 1
  }
}
``` -->

### 2. 获取审批列表

**接口路径**：`/api/v1/approval/list`

**请求方法**：`GET`

**功能描述**：获取审批列表（分页）

**请求参数**：
| 参数名 | 类型 | 必填 | 默认值 | 描述 |
|--------|------|------|--------|------|
| pageNum | Integer | 否 | 1 | 页码 |
| pageSize | Integer | 否 | 10 | 每页大小 |
| caseId | Long | 否 | - | 案件ID |
| lawyerId | Long | 否 | - | 律师ID |
| approvalType | String | 否 | - | 审核类型 |
| approvalStatus | String | 否 | - | 审核状态：PENDING-待审核, APPROVED-已通过, REJECTED-已拒绝, CANCELLED-已取消 |
| status | String | 否 | - | 状态：ACTIVE-激活, INACTIVE-停用 |

**响应数据**：
```json
{
  "code": 200,
  "message": "操作成功",
  "data": {
    "total": 100,
    "list": [
      {
        "id": 1,
        "caseId": 123,
        "caseNumber": "20260121001",
        "lawyerId": 456,
        "approvalType": "CASE_SUBMIT",
        "approvalStatus": "PENDING",
        "approvalContent": "案件提交审批",
        "approvalResult": null,
        "approvalCount": 0,
        "approverId": null,
        "approvalDate": null,
        "remark": "请尽快审核",
        "createTime": "2026-01-21T10:00:00",
        "updateTime": "2026-01-21T10:00:00",
        "createUserId": null,
        "updateUserId": null,
        "isDeleted": false,
        "status": "ACTIVE"
      }
    ]
  }
}
```

### 3. 获取审批详情

**接口路径**：`/approval/{approvalId}`

**请求方法**：`GET`

**功能描述**：根据ID获取审批详情

**请求参数**：
| 参数名 | 类型 | 必填 | 描述 |
|--------|------|------|------|
| approvalId | Long | 是 | 审批ID |

**响应数据**：
```json
{
  "code": 200,
  "message": "操作成功",
  "data": {
    "id": 1,
    "caseId": 123,
    "lawyerId": 456,
    "approvalType": "CASE_SUBMIT",
    "approvalStatus": "PENDING",
    "approvalContent": "案件提交审批",
    "approvalResult": null,
    "approvalCount": 0,
    "approverId": null,
    "approvalDate": null,
    "remark": "请尽快审核",
    "createTime": "2026-01-21T10:00:00",
    "updateTime": "2026-01-21T10:00:00",
    "createUserId": null,
    "updateUserId": null,
    "isDeleted": false,
    "status": "ACTIVE"
  }
}
```

### 4. 更新审批信息

**接口路径**：`/approval/{approvalId}`

**请求方法**：`PUT`

**功能描述**：更新审批的基本信息

**请求参数**：
| 参数名 | 类型 | 必填 | 描述 |
|--------|------|------|------|
| approvalId | Long | 是 | 审批ID |

**请求体**：
```json
{
  "approvalContent": "更新后的审批内容",
  "remark": "更新后的备注"
}
```

**响应数据**：
```json
{
  "code": 200,
  "message": "操作成功",
  "data": null
}
```

### 5. 审批操作

**接口路径**：`/approval/{approvalId}/approve`

**请求方法**：`POST`

**功能描述**：管理员对审批进行审核操作

**请求参数**：
| 参数名 | 类型 | 必填 | 描述 |
|--------|------|------|------|
| approvalId | Long | 是 | 审批ID |

**请求体**：
```json
{
  "approvalResult": "PASS",  // 审核结果：PASS-通过, FAIL-未通过
  "approvalOpinion": "审核通过",  // 审核意见
  "approverId": 789  // 审核人ID（必填）
}
```

**响应数据**：
```json
{
  "code": 200,
  "message": "操作成功",
  "data": null
}
```

### 6. 更新审批状态

**接口路径**：`/approval/{approvalId}/status`

**请求方法**：`PUT`

**功能描述**：更新审批的状态

**请求参数**：
| 参数名 | 类型 | 必填 | 描述 |
|--------|------|------|------|
| approvalId | Long | 是 | 审批ID |

**请求体**：
```json
{
  "approvalStatus": "CANCELLED"  // 审批状态：PENDING-待审核, APPROVED-已通过, REJECTED-已拒绝, CANCELLED-已取消
}
```

**响应数据**：
```json
{
  "code": 200,
  "message": "操作成功",
  "data": null
}
```

### 7. 删除审批

**接口路径**：`/approval/{approvalId}`

**请求方法**：`DELETE`

**功能描述**：删除审批

**请求参数**：
| 参数名 | 类型 | 必填 | 描述 |
|--------|------|------|------|
| approvalId | Long | 是 | 审批ID |

**响应数据**：
```json
{
  "code": 200,
  "message": "操作成功",
  "data": null
}
```

### 8. 获取审批历史记录

**接口路径**：`/approval/{approvalId}/history`

**请求方法**：`GET`

**功能描述**：获取审批的历史记录

**请求参数**：
| 参数名 | 类型 | 必填 | 默认值 | 描述 |
|--------|------|------|--------|------|
| approvalId | Long | 是 | - | 审批ID |
| pageNum | Integer | 否 | 1 | 页码 |
| pageSize | Integer | 否 | 10 | 每页大小 |

**响应数据**：
```json
{
  "code": 200,
  "message": "操作成功",
  "data": {
    "total": 2,
    "list": [
      {
        "id": 1,
        "approvalId": 1,
        "caseId": 123,
        "approverId": 789,
        "approvalType": "CASE_SUBMIT",
        "approvalStatus": "APPROVED",
        "approvalOpinion": "审核通过",
        "approvalDate": "2026-01-21T11:00:00",
        "createTime": "2026-01-21T11:00:00",
        "updateTime": "2026-01-21T11:00:00",
        "createUserId": null,
        "updateUserId": null,
        "isDeleted": false,
        "status": "ACTIVE"
      }
    ]
  }
}
```

## 三、数据字典

### 1. 审核类型（approvalType）
| 类型值 | 描述 |
|--------|------|
| CASE_SUBMIT | 案件提交 |
| CASE_CLOSE | 案件结案 |
| FEE_APPLY | 费用申请 |
| EVIDENCE_UPLOAD | 证据上传 |

### 2. 审核状态（approvalStatus）
| 状态值 | 描述 |
|--------|------|
| PENDING | 待审核 |
| APPROVED | 已通过 |
| REJECTED | 已拒绝 |
| CANCELLED | 已取消 |

### 3. 审核结果（approvalResult）
| 结果值 | 描述 |
|--------|------|
| PASS | 通过 |
| FAIL | 未通过 |

## 四、示例场景

### 1. 律师提交案件审批
```javascript
// 请求
fetch('http://192.168.0.120:8080/approval', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'Authorization': 'Bearer token'
  },
  body: JSON.stringify({
    caseId: 123,
    lawyerId: 456,
    approvalType: 'CASE_SUBMIT',
    approvalContent: '案件提交审批',
    remark: '请尽快审核'
  })
})
.then(response => response.json())
.then(data => {
  console.log(data); // { code: 200, message: '操作成功', data: { approvalId: 1 } }
});
```

### 2. 管理员审核审批
```javascript
// 请求
fetch('http://192.168.0.120:8080/approval/1/approve', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'Authorization': 'Bearer token'
  },
  body: JSON.stringify({
    approvalResult: 'PASS',
    approvalOpinion: '审核通过',
    approverId: 789
  })
})
.then(response => response.json())
.then(data => {
  console.log(data); // { code: 200, message: '操作成功', data: null }
});
```

## 五、注意事项

1. 所有接口都需要在请求头中携带有效的token进行身份认证
2. 管理员权限才能进行审批操作
3. 审批状态为"已处理"时，不能重复审批
4. 创建审批时，审核状态默认为"待审核"
5. 审批历史记录会自动生成，无需手动创建

## 六、联系方式

如有问题，请联系后端开发人员。

---

**更新时间**：2026-01-21
**版本**：v1.0
