# 第三阶段前端方案

## 1. 概述
根据1月3日最新流程处理更改文档的要求，对第三阶段的API进行了统一化修改，使其与第一阶段的实现规范保持一致。本方案旨在为前端开发提供清晰的API调用指南。

## 2. 路由前缀
第三阶段使用统一的路由前缀：`/api/case/phase3`

## 3. 模块划分
第三阶段划分为以下8个模块：
1. 财产调查（propertyInvestigation）
2. 破产费用（bankruptcyExpenses）
3. 权利主张（rightsClaim）
4. 取回权审查（reclaimReview）
5. 诉讼仲裁（litigationArbitration）
6. 债权申报（creditorClaim）
7. 社保费用（socialSecurityFees）
8. 税收核定（taxVerification）

## 4. API命名规范
每个模块都实现了完整的CRUD操作，命名格式统一：
- 新增：`/{module}/add`
- 修改：`/{module}/update`
- 单个查询：`/{module}/{id}`（待实现）
- 列表查询：`/{module}/list`
- 按案件ID查询：`/{module}/listByCase/{caseId}`

## 5. 具体API实现

### 5.1 财产调查模块

| API路径 | 请求方法 | 功能描述 | 请求参数 | 响应格式 |
|---------|----------|----------|----------|----------|
| `/propertyInvestigation/listByCase/{sepLd}` | GET | 根据案件ID获取财产调查列表 | `sepLd`：案件ID | `Result<List<Map<String, Object>>>` |
| `/propertyInvestigation/list` | GET | 获取所有财产调查 | 无 | `Result<List<Map<String, Object>>>` |
| `/propertyInvestigation/add` | POST | 新增财产调查 | `PropertyInvestigation`对象 | `Result<String>` |
| `/propertyInvestigation/update` | POST | 修改财产调查 | `PropertyInvestigation`对象 | `Result<String>` |

### 5.2 破产费用模块

| API路径 | 请求方法 | 功能描述 | 请求参数 | 响应格式 |
|---------|----------|----------|----------|----------|
| `/bankruptcyExpenses/listByCase/{sepLd}` | GET | 根据案件ID获取破产费用列表 | `sepLd`：案件ID | `Result<List<Map<String, Object>>>` |
| `/bankruptcyExpenses/list` | GET | 获取所有破产费用 | 无 | `Result<List<Map<String, Object>>>` |
| `/bankruptcyExpenses/add` | POST | 新增破产费用 | `BankruptcyExpenses`对象 | `Result<String>` |
| `/bankruptcyExpenses/update` | POST | 修改破产费用 | `BankruptcyExpenses`对象 | `Result<String>` |

### 5.3 权利主张模块

| API路径 | 请求方法 | 功能描述 | 请求参数 | 响应格式 |
|---------|----------|----------|----------|----------|
| `/rightsClaim/listByCase/{sepLd}` | GET | 根据案件ID获取权利主张列表 | `sepLd`：案件ID | `Result<List<Map<String, Object>>>` |
| `/rightsClaim/list` | GET | 获取所有权利主张 | 无 | `Result<List<Map<String, Object>>>` |
| `/rightsClaim/add` | POST | 新增权利主张 | `RightsClaim`对象 | `Result<String>` |
| `/rightsClaim/update` | POST | 修改权利主张 | `RightsClaim`对象 | `Result<String>` |

### 5.4 取回权审查模块

| API路径 | 请求方法 | 功能描述 | 请求参数 | 响应格式 |
|---------|----------|----------|----------|----------|
| `/reclaimReview/listByCase/{sepLd}` | GET | 根据案件ID获取取回权审查列表 | `sepLd`：案件ID | `Result<List<Map<String, Object>>>` |
| `/reclaimReview/list` | GET | 获取所有取回权审查 | 无 | `Result<List<Map<String, Object>>>` |
| `/reclaimReview/add` | POST | 新增取回权审查 | `ReclaimReview`对象 | `Result<String>` |
| `/reclaimReview/update` | POST | 修改取回权审查 | `ReclaimReview`对象 | `Result<String>` |

### 5.5 诉讼仲裁模块

| API路径 | 请求方法 | 功能描述 | 请求参数 | 响应格式 |
|---------|----------|----------|----------|----------|
| `/litigationArbitration/listByCase/{sepLd}` | GET | 根据案件ID获取诉讼仲裁列表 | `sepLd`：案件ID | `Result<List<Map<String, Object>>>` |
| `/litigationArbitration/list` | GET | 获取所有诉讼仲裁 | 无 | `Result<List<Map<String, Object>>>` |
| `/litigationArbitration/add` | POST | 新增诉讼仲裁 | `LitigationArbitration`对象 | `Result<String>` |
| `/litigationArbitration/update` | POST | 修改诉讼仲裁 | `LitigationArbitration`对象 | `Result<String>` |

### 5.6 债权申报模块

| API路径 | 请求方法 | 功能描述 | 请求参数 | 响应格式 |
|---------|----------|----------|----------|----------|
| `/creditorClaim/listByCase/{sepLd}` | GET | 根据案件ID获取债权申报列表 | `sepLd`：案件ID | `Result<List<Map<String, Object>>>` |
| `/creditorClaim/list` | GET | 获取所有债权申报 | 无 | `Result<List<Map<String, Object>>>` |
| `/creditorClaim/add` | POST | 新增债权申报 | `CreditorClaim`对象 | `Result<String>` |
| `/creditorClaim/update` | POST | 修改债权申报 | `CreditorClaim`对象 | `Result<String>` |

### 5.7 社保费用模块

| API路径 | 请求方法 | 功能描述 | 请求参数 | 响应格式 |
|---------|----------|----------|----------|----------|
| `/socialSecurityFees/listByCase/{sepLd}` | GET | 根据案件ID获取社保费用列表 | `sepLd`：案件ID | `Result<List<Map<String, Object>>>` |
| `/socialSecurityFees/list` | GET | 获取所有社保费用 | 无 | `Result<List<Map<String, Object>>>` |
| `/socialSecurityFees/add` | POST | 新增社保费用 | `SocialSecurityFees`对象 | `Result<String>` |
| `/socialSecurityFees/update` | POST | 修改社保费用 | `SocialSecurityFees`对象 | `Result<String>` |

### 5.8 税收核定模块

| API路径 | 请求方法 | 功能描述 | 请求参数 | 响应格式 |
|---------|----------|----------|----------|----------|
| `/taxVerification/listByCase/{sepLd}` | GET | 根据案件ID获取税收核定列表 | `sepLd`：案件ID | `Result<List<Map<String, Object>>>` |
| `/taxVerification/list` | GET | 获取所有税收核定 | 无 | `Result<List<Map<String, Object>>>` |
| `/taxVerification/add` | POST | 新增税收核定 | `TaxVerification`对象 | `Result<String>` |
| `/taxVerification/update` | POST | 修改税收核定 | `TaxVerification`对象 | `Result<String>` |

### 5.9 阶段更新模块

| API路径 | 请求方法 | 功能描述 | 请求参数 | 响应格式 |
|---------|----------|----------|----------|----------|
| `/update` | POST | 更新第三阶段 | `Map<String, Object>`对象 | `Result<String>` |

## 6. 请求/响应格式

### 6.1 请求格式
所有POST请求均使用JSON格式，请求体为对应的数据模型对象。

### 6.2 响应格式
所有API统一返回`Result`封装对象：
```json
{
  "code": 200,
  "message": "成功",
  "data": {} // 具体返回数据
}
```

## 7. 异常处理
API会返回统一的错误信息，格式如下：
```json
{
  "code": 500,
  "message": "错误信息",
  "data": null
}
```

## 8. 注意事项
1. 所有API调用均需携带有效的认证令牌
2. 按案件ID查询时，`sepLd`参数为案件ID
3. 新增和修改操作时，系统会自动填充当前用户信息和操作时间
4. 所有数据模型的`zt`字段默认为"0"（表示有效）

## 9. 示例代码

### 9.1 获取财产调查列表（按案件ID）
```javascript
fetch('/api/case/phase3/propertyInvestigation/listByCase/123')
  .then(response => response.json())
  .then(data => {
    if (data.code === 200) {
      console.log(data.data); // 财产调查列表
    } else {
      console.error(data.message);
    }
  });
```

### 9.2 新增财产调查
```javascript
const propertyInvestigation = {
  sepLd: "123",
  propertyName: "房产",
  propertyType: "不动产",
  // 其他字段...
};

fetch('/api/case/phase3/propertyInvestigation/add', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'Authorization': 'Bearer your-token'
  },
  body: JSON.stringify(propertyInvestigation)
})
  .then(response => response.json())
  .then(data => {
    if (data.code === 200) {
      console.log('添加成功');
    } else {
      console.error(data.message);
    }
  });
```

## 10. 数据模型

### 10.1 财产调查（PropertyInvestigation）
- sepLd：案件ID
- propertyName：财产名称
- propertyType：财产类型
- propertyValue：财产价值
- sepAuser：操作人
- sepAdate：操作时间
- zt：状态（0：有效，1：无效）

### 10.2 破产费用（BankruptcyExpenses）
- sepLd：案件ID
- expenseType：费用类型
- expenseAmount：费用金额
- expenseDate：发生日期
- sepAuser：操作人
- sepAdate：操作时间
- zt：状态（0：有效，1：无效）

### 10.3 权利主张（RightsClaim）
- sepLd：案件ID
- claimType：主张类型
- claimContent：主张内容
- claimDate：主张日期
- sepAuser：操作人
- sepAdate：操作时间
- zt：状态（0：有效，1：无效）

### 10.4 取回权审查（ReclaimReview）
- sepLd：案件ID
- reclaimant：取回权人
- reclaimProperty：取回财产
- reviewResult：审查结果
- sepAuser：操作人
- sepAdate：操作时间
- zt：状态（0：有效，1：无效）

### 10.5 诉讼仲裁（LitigationArbitration）
- sepLd：案件ID
- caseType：案件类型
- caseNumber：案号
- caseStatus：案件状态
- sepAuser：操作人
- sepAdate：操作时间
- zt：状态（0：有效，1：无效）

### 10.6 债权申报（CreditorClaim）
- sepLd：案件ID
- creditorName：债权人名称
- claimAmount：申报金额
- claimType：债权类型
- sepAuser：操作人
- sepAdate：操作时间
- zt：状态（0：有效，1：无效）

### 10.7 社保费用（SocialSecurityFees）
- sepLd：案件ID
- feeType：费用类型
- feeAmount：费用金额
- feePeriod：缴费期限
- sepAuser：操作人
- sepAdate：操作时间
- zt：状态（0：有效，1：无效）

### 10.8 税收核定（TaxVerification）
- sepLd：案件ID
- taxType：税种
- taxAmount：税额
- verificationDate：核定日期
- sepAuser：操作人
- sepAdate：操作时间
- zt：状态（0：有效，1：无效）

## 11. 总结
本方案对第三阶段的API进行了统一化修改，使其与第一阶段的实现规范保持一致。前端开发人员应按照本方案进行API调用，确保系统的一致性和可维护性。