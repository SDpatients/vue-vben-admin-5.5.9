# 1月21日案件核审API汇总

## 1. 概述

本文档描述破产案件管理系统中案件审核模块的API接口，主要用于管理案件的审核流程，包括提交审核、审核操作、撤销审核等功能。所有接口均遵循RESTful风格，使用JSON格式进行数据交互。

## 2. 基础信息

- **Base URL**: `/api/case`
- **Content-Type**: `application/json`
- **认证方式**: Bearer Token (在请求头中携带)
- **响应格式**: 统一使用 `Result` 包装

### 统一响应格式

```json
{
  "code": 200,
  "message": "success",
  "data": {}
}
```

## 3. API接口列表

### 3.1 案件审核操作

#### 3.1.1 案件审核

**接口说明**: 审核案件，包括通过和驳回两种操作

**请求方式**: `POST`

**接口路径**: `/api/case/{caseId}/review`

**路径参数**:

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| caseId | Long | 是 | 案件ID |

**请求体**:

| 字段名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| reviewStatus | String | 是 | 审核状态: APPROVED-已通过, REJECTED-已驳回 |
| reviewOpinion | String | 是 | 审核意见 |

**请求示例**:
```json
{
  "reviewStatus": "APPROVED",
  "reviewOpinion": "审核通过，材料齐全"
}
```

**响应示例**:
```json
{
  "code": 200,
  "message": "success",
  "data": null
}
```

#### 3.1.2 提交案件审核

**接口说明**: 将案件提交到审核流程

**请求方式**: `POST`

**接口路径**: `/api/case/{caseId}/submit-review`

**路径参数**:

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| caseId | Long | 是 | 案件ID |

**响应示例**:
```json
{
  "code": 200,
  "message": "success",
  "data": null
}
```

#### 3.1.3 撤销案件审核

**接口说明**: 撤销待审核状态的案件

**请求方式**: `POST`

**接口路径**: `/api/case/{caseId}/withdraw-review`

**路径参数**:

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| caseId | Long | 是 | 案件ID |

**响应示例**:
```json
{
  "code": 200,
  "message": "success",
  "data": null
}
```

#### 3.1.4 重新提交案件审核

**接口说明**: 被驳回的案件重新提交审核

**请求方式**: `POST`

**接口路径**: `/api/case/{caseId}/resubmit-review`

**路径参数**:

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| caseId | Long | 是 | 案件ID |

**响应示例**:
```json
{
  "code": 200,
  "message": "success",
  "data": null
}
```

#### 3.1.5 批量审核案件

**接口说明**: 批量审核多个案件

**请求方式**: `POST`

**接口路径**: `/api/case/batch-review`

**请求体**:

| 字段名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| caseIds | Array[Long] | 是 | 案件ID列表 |
| reviewStatus | String | 是 | 审核状态: APPROVED-已通过, REJECTED-已驳回 |
| reviewOpinion | String | 否 | 审核意见 |

**请求示例**:
```json
{
  "caseIds": [1, 2, 3],
  "reviewStatus": "APPROVED",
  "reviewOpinion": "批量审核通过"
}
```

**响应示例**:
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "total": 3,
    "success": 3
  }
}
```

#### 3.1.6 撤销审核结果

**接口说明**: 撤销已审核的案件结果

**请求方式**: `POST`

**接口路径**: `/api/case/{caseId}/revoke-review`

**路径参数**:

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| caseId | Long | 是 | 案件ID |

**响应示例**:
```json
{
  "code": 200,
  "message": "success",
  "data": null
}
```

### 3.2 案件审核查询

#### 3.2.1 查询案件审核状态

**接口说明**: 查询指定案件的审核状态

**请求方式**: `GET`

**接口路径**: `/api/case/{caseId}/review-status`

**路径参数**:

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| caseId | Long | 是 | 案件ID |

**响应示例**:
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "id": 1,
    "caseNumber": "（2025）破字第001号",
    "caseName": "XX公司破产案",
    "reviewStatus": "APPROVED",
    "reviewerId": 2,
    "reviewTime": "2026-01-21T10:30:00",
    "reviewOpinion": "审核通过",
    "reviewCount": 1,
    "caseStatus": "IN_PROGRESS"
  }
}
```

#### 3.2.2 查询待审核案件列表

**接口说明**: 查询待审核状态的案件列表，支持分页和关键词搜索

**请求方式**: `GET`

**接口路径**: `/api/case/review/pending`

**请求参数**:

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| pageNum | Integer | 否 | 页码，默认1 |
| pageSize | Integer | 否 | 每页大小，默认10 |
| keyword | String | 否 | 关键词（案号） |

**响应示例**:
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "total": 10,
    "list": [
      {
        "id": 1,
        "caseNumber": "（2025）破字第001号",
        "caseName": "XX公司破产案",
        "reviewStatus": "PENDING",
        "caseStatus": "PENDING"
      }
    ],
    "pageNum": 1,
    "pageSize": 10,
    "totalPages": 1
  }
}
```

#### 3.2.3 查询已审核案件列表

**接口说明**: 查询已通过审核的案件列表，支持分页和关键词搜索

**请求方式**: `GET`

**接口路径**: `/api/case/review/approved`

**请求参数**:

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| pageNum | Integer | 否 | 页码，默认1 |
| pageSize | Integer | 否 | 每页大小，默认10 |
| keyword | String | 否 | 关键词（案号） |

**响应示例**:
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "total": 5,
    "list": [
      {
        "id": 1,
        "caseNumber": "（2025）破字第001号",
        "caseName": "XX公司破产案",
        "reviewStatus": "APPROVED",
        "reviewTime": "2026-01-21T10:30:00",
        "caseStatus": "IN_PROGRESS"
      }
    ],
    "pageNum": 1,
    "pageSize": 10,
    "totalPages": 1
  }
}
```

#### 3.2.4 查询已驳回案件列表

**接口说明**: 查询已驳回的案件列表，支持分页和关键词搜索

**请求方式**: `GET`

**接口路径**: `/api/case/review/rejected`

**请求参数**:

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| pageNum | Integer | 否 | 页码，默认1 |
| pageSize | Integer | 否 | 每页大小，默认10 |
| keyword | String | 否 | 关键词（案号） |

**响应示例**:
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "total": 3,
    "list": [
      {
        "id": 2,
        "caseNumber": "（2025）破字第002号",
        "caseName": "YY公司破产案",
        "reviewStatus": "REJECTED",
        "reviewTime": "2026-01-21T11:00:00",
        "caseStatus": "PENDING"
      }
    ],
    "pageNum": 1,
    "pageSize": 10,
    "totalPages": 1
  }
}
```

#### 3.2.5 查询指定审核人审核的案件列表

**接口说明**: 查询指定审核人审核的案件列表，支持分页和审核状态筛选

**请求方式**: `GET`

**接口路径**: `/api/case/review/reviewer/{reviewerId}`

**路径参数**:

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| reviewerId | Long | 是 | 审核人ID |

**请求参数**:

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| pageNum | Integer | 否 | 页码，默认1 |
| pageSize | Integer | 否 | 每页大小，默认10 |
| reviewStatus | String | 否 | 审核状态: PENDING-待审核, APPROVED-已通过, REJECTED-已驳回 |

**响应示例**:
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "total": 8,
    "list": [
      {
        "id": 1,
        "caseNumber": "（2025）破字第001号",
        "caseName": "XX公司破产案",
        "reviewStatus": "APPROVED",
        "reviewerId": 2,
        "reviewTime": "2026-01-21T10:30:00"
      }
    ],
    "pageNum": 1,
    "pageSize": 10,
    "totalPages": 1
  }
}
```

#### 3.2.6 查询审核状态统计

**接口说明**: 查询案件审核状态的统计信息

**请求方式**: `GET`

**接口路径**: `/api/case/review/statistics`

**响应示例**:
```json
{
  "code": 200,
  "message": "success",
  "data": [
    {
      "reviewStatus": "PENDING",
      "count": 10
    },
    {
      "reviewStatus": "APPROVED",
      "count": 25
    },
    {
      "reviewStatus": "REJECTED",
      "count": 5
    }
  ]
}
```

## 4. 数据结构说明

### 4.1 审核状态枚举

| 状态值 | 说明 |
|--------|------|
| PENDING | 待审核 |
| APPROVED | 已通过 |
| REJECTED | 已驳回 |

### 4.2 案件状态枚举

| 状态值 | 说明 |
|--------|------|
| PENDING | 待处理 |
| IN_PROGRESS | 进行中 |
| COMPLETED | 已完成 |
| AWAITING | 报结 |

## 5. 错误码说明

| 错误码 | 说明 |
|--------|------|
| 200 | 成功 |
| 400 | 请求参数错误 |
| 401 | 未授权 |
| 403 | 无权限 |
| 404 | 资源不存在 |
| 500 | 服务器内部错误 |

**常见错误响应示例**:

```json
{
  "code": 404,
  "message": "案件不存在: 999",
  "data": null
}
```

```json
{
  "code": 400,
  "message": "案件当前状态不允许审核",
  "data": null
}
```

## 6. 前端开发注意事项

### 6.1 审核流程控制

1. **提交审核前**：确保案件处于可提交状态
2. **审核操作**：根据当前用户权限判断是否显示审核按钮
3. **状态流转**：
   - 待审核状态：显示"撤销审核"按钮
   - 已驳回状态：显示"重新提交审核"按钮
   - 已审核状态：显示"撤销审核结果"按钮

### 6.2 分页处理

- 所有列表接口都支持分页，使用标准的分页格式
- 前端需要处理 `total`（总记录数）、`pageNum`（当前页码）、`pageSize`（每页大小）和 `totalPages`（总页数）

### 6.3 权限控制

- 确保用户只能访问自己有权限的案件
- 审核操作需要特定的审核权限

### 6.4 时间格式

- 所有时间字段使用ISO 8601格式（如：`2026-01-21T10:30:00`）
- 前端需要根据时区进行转换显示

### 6.5 错误处理

- 统一处理 `Result` 包装的响应
- 根据 `code` 字段判断请求是否成功
- 根据 `message` 字段显示错误提示

## 7. 更新日志

| 版本 | 日期 | 说明 |
|------|------|------|
| 1.0 | 2026-01-21 | 初始版本，完成案件审核模块API |

## 8. 联系方式

如有API使用问题，请联系后端开发团队。
