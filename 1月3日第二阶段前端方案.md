# 第二阶段前端方案文档

## 1. 概述
本文档基于《流程处理统一化修改文档》，针对案件管理系统第二阶段（phase2）的前端API调用方案进行统一化设计，确保与后端修改保持一致。

## 2. 当前第二阶段实现分析

### 2.1 现有路由前缀
当前第二阶段使用的路由前缀：`/api/web`

### 2.2 现有模块及API列表
第二阶段目前实现了10个业务模块，每个模块包含基本的查询和新增功能：

| 模块名称 | 中文名称 | 现有API路径 |
|---------|---------|------------|
| managementSystem | 管理制度 | `/getAllManagement`、`/addManagement` |
| accountSeal | 印章管理 | `/getAllSealManagement`、`/addSealManagement` |
| legalProcedure | 法律程序 | `/getAllLegalProcedure`、`/addLegalProcedure` |
| propertyReceipt | 财产接管 | `/getAllPropertyReceipt`、`/addPropertyReceipt` |
| emergency | 应急预案 | `/getAllEmergency`、`/addEmergency` |
| propertyPlan | 财产处置计划 | `/getAllPropertyPlan`、`/addPropertyPlan` |
| personnelEmp | 人事管理 | `/getAllPersonnelEmp`、`/addPersonnelEmployment` |
| internalAffairs | 内部事务 | `/getAllInternalAffairs`、`/addInternalAffairs` |
| contractManagement | 合同管理 | `/getAllContractManagement`、`/addContractManagement` |
| businessManagement | 经营管理 | `/getAllBusinessManagement`、`/addBusinessManagement` |

### 2.3 现有请求/响应格式
- 请求：使用`Map<String, Object>`作为请求体
- 响应：统一使用`Result`封装，包含`code`、`msg`、`data`字段

## 3. 统一化修改方案

### 3.1 路由前缀修改
**旧前缀**：`/api/web`
**新前缀**：`/api/case/phase2`

### 3.2 API路径统一化
根据统一化要求，所有API路径将按照以下规范修改：

| 操作类型 | 旧格式 | 新格式 |
|---------|-------|-------|
| 新增 | `/add{Module}` | `/{module}/add` |
| 修改 | `/update1` | `/{module}/update` |
| 删除 | 未实现 | `/{module}/delete/{id}` |
| 单个查询 | 未实现 | `/{module}/{id}` |
| 列表查询 | `/getAll{Module}` | `/{module}/list` |
| 按案件ID查询 | `/getAll{Module}?sepLd={caseId}` | `/{module}/listByCase/{caseId}` |

### 3.3 统一化后的API列表

#### 3.3.1 管理制度模块（managementSystem）
| 操作类型 | 旧API路径 | 新API路径 | 方法 |
|---------|----------|----------|------|
| 列表查询 | `/getAllManagement` | `/managementSystem/list` | GET |
| 按案件ID查询 | `/getAllManagement?sepLd={caseId}` | `/managementSystem/listByCase/{caseId}` | GET |
| 新增 | `/addManagement` | `/managementSystem/add` | POST |
| 修改 | 未实现 | `/managementSystem/update` | POST |
| 删除 | 未实现 | `/managementSystem/delete/{id}` | GET |
| 单个查询 | 未实现 | `/managementSystem/{id}` | GET |

#### 3.3.2 印章管理模块（accountSeal）
| 操作类型 | 旧API路径 | 新API路径 | 方法 |
|---------|----------|----------|------|
| 列表查询 | `/getAllSealManagement` | `/accountSeal/list` | GET |
| 按案件ID查询 | `/getAllSealManagement?sepLd={caseId}` | `/accountSeal/listByCase/{caseId}` | GET |
| 新增 | `/addSealManagement` | `/accountSeal/add` | POST |
| 修改 | 未实现 | `/accountSeal/update` | POST |
| 删除 | 未实现 | `/accountSeal/delete/{id}` | GET |
| 单个查询 | 未实现 | `/accountSeal/{id}` | GET |

#### 3.3.3 法律程序模块（legalProcedure）
| 操作类型 | 旧API路径 | 新API路径 | 方法 |
|---------|----------|----------|------|
| 列表查询 | `/getAllLegalProcedure` | `/legalProcedure/list` | GET |
| 按案件ID查询 | `/getAllLegalProcedure?sepLd={caseId}` | `/legalProcedure/listByCase/{caseId}` | GET |
| 新增 | `/addLegalProcedure` | `/legalProcedure/add` | POST |
| 修改 | 未实现 | `/legalProcedure/update` | POST |
| 删除 | 未实现 | `/legalProcedure/delete/{id}` | GET |
| 单个查询 | 未实现 | `/legalProcedure/{id}` | GET |

#### 3.3.4 财产接管模块（propertyReceipt）
| 操作类型 | 旧API路径 | 新API路径 | 方法 |
|---------|----------|----------|------|
| 列表查询 | `/getAllPropertyReceipt` | `/propertyReceipt/list` | GET |
| 按案件ID查询 | `/getAllPropertyReceipt?sepLd={caseId}` | `/propertyReceipt/listByCase/{caseId}` | GET |
| 新增 | `/addPropertyReceipt` | `/propertyReceipt/add` | POST |
| 修改 | 未实现 | `/propertyReceipt/update` | POST |
| 删除 | 未实现 | `/propertyReceipt/delete/{id}` | GET |
| 单个查询 | 未实现 | `/propertyReceipt/{id}` | GET |

#### 3.3.5 应急预案模块（emergency）
| 操作类型 | 旧API路径 | 新API路径 | 方法 |
|---------|----------|----------|------|
| 列表查询 | `/getAllEmergency` | `/emergency/list` | GET |
| 按案件ID查询 | `/getAllEmergency?sepLd={caseId}` | `/emergency/listByCase/{caseId}` | GET |
| 新增 | `/addEmergency` | `/emergency/add` | POST |
| 修改 | 未实现 | `/emergency/update` | POST |
| 删除 | 未实现 | `/emergency/delete/{id}` | GET |
| 单个查询 | 未实现 | `/emergency/{id}` | GET |

#### 3.3.6 财产处置计划模块（propertyPlan）
| 操作类型 | 旧API路径 | 新API路径 | 方法 |
|---------|----------|----------|------|
| 列表查询 | `/getAllPropertyPlan` | `/propertyPlan/list` | GET |
| 按案件ID查询 | `/getAllPropertyPlan?sepLd={caseId}` | `/propertyPlan/listByCase/{caseId}` | GET |
| 新增 | `/addPropertyPlan` | `/propertyPlan/add` | POST |
| 修改 | 未实现 | `/propertyPlan/update` | POST |
| 删除 | 未实现 | `/propertyPlan/delete/{id}` | GET |
| 单个查询 | 未实现 | `/propertyPlan/{id}` | GET |

#### 3.3.7 人事管理模块（personnelEmp）
| 操作类型 | 旧API路径 | 新API路径 | 方法 |
|---------|----------|----------|------|
| 列表查询 | `/getAllPersonnelEmp` | `/personnelEmp/list` | GET |
| 按案件ID查询 | `/getAllPersonnelEmp?sepLd={caseId}` | `/personnelEmp/listByCase/{caseId}` | GET |
| 新增 | `/addPersonnelEmployment` | `/personnelEmp/add` | POST |
| 修改 | 未实现 | `/personnelEmp/update` | POST |
| 删除 | 未实现 | `/personnelEmp/delete/{id}` | GET |
| 单个查询 | 未实现 | `/personnelEmp/{id}` | GET |

#### 3.3.8 内部事务模块（internalAffairs）
| 操作类型 | 旧API路径 | 新API路径 | 方法 |
|---------|----------|----------|------|
| 列表查询 | `/getAllInternalAffairs` | `/internalAffairs/list` | GET |
| 按案件ID查询 | `/getAllInternalAffairs?sepLd={caseId}` | `/internalAffairs/listByCase/{caseId}` | GET |
| 新增 | `/addInternalAffairs` | `/internalAffairs/add` | POST |
| 修改 | 未实现 | `/internalAffairs/update` | POST |
| 删除 | 未实现 | `/internalAffairs/delete/{id}` | GET |
| 单个查询 | 未实现 | `/internalAffairs/{id}` | GET |

#### 3.3.9 合同管理模块（contractManagement）
| 操作类型 | 旧API路径 | 新API路径 | 方法 |
|---------|----------|----------|------|
| 列表查询 | `/getAllContractManagement` | `/contractManagement/list` | GET |
| 按案件ID查询 | `/getAllContractManagement?sepLd={caseId}` | `/contractManagement/listByCase/{caseId}` | GET |
| 新增 | `/addContractManagement` | `/contractManagement/add` | POST |
| 修改 | 未实现 | `/contractManagement/update` | POST |
| 删除 | 未实现 | `/contractManagement/delete/{id}` | GET |
| 单个查询 | 未实现 | `/contractManagement/{id}` | GET |

#### 3.3.10 经营管理模块（businessManagement）
| 操作类型 | 旧API路径 | 新API路径 | 方法 |
|---------|----------|----------|------|
| 列表查询 | `/getAllBusinessManagement` | `/businessManagement/list` | GET |
| 按案件ID查询 | `/getAllBusinessManagement?sepLd={caseId}` | `/businessManagement/listByCase/{caseId}` | GET |
| 新增 | `/addBusinessManagement` | `/businessManagement/add` | POST |
| 修改 | 未实现 | `/businessManagement/update` | POST |
| 删除 | 未实现 | `/businessManagement/delete/{id}` | GET |
| 单个查询 | 未实现 | `/businessManagement/{id}` | GET |

#### 3.3.11 工作团队视图（workTeamBaseView）
| 操作类型 | 旧API路径 | 新API路径 | 方法 |
|---------|----------|----------|------|
| 列表查询 | `/getWorkTeamBaseView` | `/workTeamBaseView/list` | GET |

### 3.4 请求/响应格式统一

#### 3.4.1 请求格式
- 使用实体类作为请求对象，替代原来的`Map<String, Object>`
- 每个模块对应一个实体类，如`ManagementSystem`、`AccountSeal`等

#### 3.4.2 响应格式
- 统一返回`Result`封装，包含：
  - `code`：响应状态码（200成功，其他失败）
  - `msg`：响应消息
  - `data`：响应数据

### 3.5 前端调用示例

#### 3.5.1 旧调用方式
```javascript
// 查询管理制度列表
axios.get('/api/web/getAllManagement', {
  params: { sepLd: caseId }
});

// 新增管理制度
axios.post('/api/web/addManagement', {
  name: '管理制度名称',
  content: '管理制度内容'
});
```

#### 3.5.2 新调用方式
```javascript
// 查询管理制度列表
axios.get('/api/case/phase2/managementSystem/list');

// 按案件ID查询管理制度
axios.get(`/api/case/phase2/managementSystem/listByCase/${caseId}`);

// 新增管理制度
axios.post('/api/case/phase2/managementSystem/add', {
  name: '管理制度名称',
  content: '管理制度内容'
});
```

## 4. 实现步骤

1. **后端修改**：按照统一化要求修改后端API实现
2. **前端适配**：
   - 更新API基础URL配置
   - 修改所有API调用路径
   - 调整请求参数格式（如有必要）
   - 确保响应处理逻辑兼容
3. **测试验证**：
   - 验证所有API调用正常
   - 验证数据格式正确
   - 验证业务逻辑正常

## 5. 注意事项

1. 修改前需备份原有代码和配置
2. 修改过程中需确保不影响现有功能
3. 修改完成后需进行充分测试
4. 前端需与后端同步修改，确保接口调用一致
5. 后续新增功能需按照统一化规范实现

## 6. 验收标准

1. 所有API路由前缀统一为`/api/case/phase2`
2. 所有API路径符合统一命名规范
3. 所有API实现完整的CRUD操作
4. 所有API使用实体类进行数据传输
5. 所有API返回统一的`Result`封装格式
6. 前端能够正常调用所有修改后的API

---

**文档编写日期**：2026-01-03  
**修改责任人**：前端开发团队  
**审核人**：架构师